{"version":3,"sources":["modal/confirm.jsx"],"names":["React","ReactDOM","classNames","Icon","Dialog","destroyFns","ActionButton","getConfirmLocale","warning","IS_REACT_16","createPortal","ConfirmDialog","props","onCancel","onOk","close","zIndex","afterClose","visible","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","iconType","icon","undefined","okType","prefixCls","contentPrefixCls","okCancel","width","style","mask","maskClosable","runtimeLocale","okText","justOkText","cancelText","autoFocusButton","transitionName","maskTransitionName","classString","type","className","cancelButton","iconNode","bind","triggerCancel","title","content","confirm","config","div","document","createElement","body","appendChild","currentConfig","args","destroy","render","update","newConfig","unmountResult","unmountComponentAtNode","parentNode","removeChild","some","param","i","length","fn","splice","push"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport Icon from '../icon';\nimport Dialog, { destroyFns } from './Modal';\nimport ActionButton from './ActionButton';\nimport { getConfirmLocale } from './locale';\nimport warning from '../_util/warning';\nconst IS_REACT_16 = !!ReactDOM.createPortal;\nconst ConfirmDialog = (props) => {\n    const { onCancel, onOk, close, zIndex, afterClose, visible, keyboard, centered, getContainer, maskStyle, okButtonProps, cancelButtonProps, iconType = 'question-circle', } = props;\n    warning(!('iconType' in props), 'Modal', `The property 'iconType' is deprecated. Use the property 'icon' instead.`);\n    // 支持传入{ icon: null }来隐藏`Modal.confirm`默认的Icon\n    const icon = props.icon === undefined ? iconType : props.icon;\n    const okType = props.okType || 'primary';\n    const prefixCls = props.prefixCls || 'ant-modal';\n    const contentPrefixCls = `${prefixCls}-confirm`;\n    // 默认为 true，保持向下兼容\n    const okCancel = 'okCancel' in props ? props.okCancel : true;\n    const width = props.width || 416;\n    const style = props.style || {};\n    const mask = props.mask === undefined ? true : props.mask;\n    // 默认为 false，保持旧版默认行为\n    const maskClosable = props.maskClosable === undefined ? false : props.maskClosable;\n    const runtimeLocale = getConfirmLocale();\n    const okText = props.okText || (okCancel ? runtimeLocale.okText : runtimeLocale.justOkText);\n    const cancelText = props.cancelText || runtimeLocale.cancelText;\n    const autoFocusButton = props.autoFocusButton === null ? false : props.autoFocusButton || 'ok';\n    const transitionName = props.transitionName || 'zoom';\n    const maskTransitionName = props.maskTransitionName || 'fade';\n    const classString = classNames(contentPrefixCls, `${contentPrefixCls}-${props.type}`, props.className);\n    const cancelButton = okCancel && (<ActionButton actionFn={onCancel} closeModal={close} autoFocus={autoFocusButton === 'cancel'} buttonProps={cancelButtonProps}>\n      {cancelText}\n    </ActionButton>);\n    const iconNode = typeof icon === 'string' ? <Icon type={icon}/> : icon;\n    return (<Dialog prefixCls={prefixCls} className={classString} wrapClassName={classNames({ [`${contentPrefixCls}-centered`]: !!props.centered })} onCancel={close.bind(this, { triggerCancel: true })} visible={visible} title=\"\" transitionName={transitionName} footer=\"\" maskTransitionName={maskTransitionName} mask={mask} maskClosable={maskClosable} maskStyle={maskStyle} style={style} width={width} zIndex={zIndex} afterClose={afterClose} keyboard={keyboard} centered={centered} getContainer={getContainer}>\n      <div className={`${contentPrefixCls}-body-wrapper`}>\n        <div className={`${contentPrefixCls}-body`}>\n          {iconNode}\n          <span className={`${contentPrefixCls}-title`}>{props.title}</span>\n          <div className={`${contentPrefixCls}-content`}>{props.content}</div>\n        </div>\n        <div className={`${contentPrefixCls}-btns`}>\n          {cancelButton}\n          <ActionButton type={okType} actionFn={onOk} closeModal={close} autoFocus={autoFocusButton === 'ok'} buttonProps={okButtonProps}>\n            {okText}\n          </ActionButton>\n        </div>\n      </div>\n    </Dialog>);\n};\nexport default function confirm(config) {\n    const div = document.createElement('div');\n    document.body.appendChild(div);\n    let currentConfig = Object.assign({}, config, { close, visible: true });\n    function close(...args) {\n        currentConfig = Object.assign({}, currentConfig, { visible: false, afterClose: destroy.bind(this, ...args) });\n        if (IS_REACT_16) {\n            render(currentConfig);\n        }\n        else {\n            destroy(...args);\n        }\n    }\n    function update(newConfig) {\n        currentConfig = Object.assign({}, currentConfig, newConfig);\n        render(currentConfig);\n    }\n    function destroy(...args) {\n        const unmountResult = ReactDOM.unmountComponentAtNode(div);\n        if (unmountResult && div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n        const triggerCancel = args.some(param => param && param.triggerCancel);\n        if (config.onCancel && triggerCancel) {\n            config.onCancel(...args);\n        }\n        for (let i = 0; i < destroyFns.length; i++) {\n            const fn = destroyFns[i];\n            if (fn === close) {\n                destroyFns.splice(i, 1);\n                break;\n            }\n        }\n    }\n    function render(props) {\n        ReactDOM.render(<ConfirmDialog {...props} getContainer={false}/>, div);\n    }\n    render(currentConfig);\n    destroyFns.push(close);\n    return {\n        destroy: close,\n        update,\n    };\n}\n"],"file":"confirm.js"}