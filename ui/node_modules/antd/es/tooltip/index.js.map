{"version":3,"sources":["tooltip/index.jsx"],"names":["React","cloneElement","polyfill","RcTooltip","classNames","getPlacements","ConfigConsumer","splitObject","obj","keys","picked","omitted","forEach","key","Tooltip","props","onVisibleChange","visible","setState","isNoTitle","onPopupAlign","domNode","align","placements","placement","Object","filter","points","rect","getBoundingClientRect","transformOrigin","top","left","indexOf","height","offset","width","style","saveTooltip","node","tooltip","renderTooltip","getContextPopupContainer","getPopupContainer","getPrefixCls","state","customizePrefixCls","prefixCls","title","overlay","openClassName","getTooltipContainer","children","child","getDisabledCompatibleChildren","isValidElement","childProps","childCls","className","defaultVisible","getPopupDomNode","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","verticalArrowShift","element","elementType","type","__ANT_BUTTON","__ANT_SWITCH","disabled","spanStyle","display","cursor","block","buttonStyle","pointerEvents","nextProps","Component","defaultProps","transitionName","mouseEnterDelay","mouseLeaveDelay"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { cloneElement } from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RcTooltip from 'rc-tooltip';\nimport classNames from 'classnames';\nimport getPlacements from './placements';\nimport { ConfigConsumer } from '../config-provider';\nconst splitObject = (obj, keys) => {\n    const picked = {};\n    const omitted = Object.assign({}, obj);\n    keys.forEach(key => {\n        if (obj && key in obj) {\n            picked[key] = obj[key];\n            delete omitted[key];\n        }\n    });\n    return { picked, omitted };\n};\nclass Tooltip extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onVisibleChange = (visible) => {\n            const { onVisibleChange } = this.props;\n            if (!('visible' in this.props)) {\n                this.setState({ visible: this.isNoTitle() ? false : visible });\n            }\n            if (onVisibleChange && !this.isNoTitle()) {\n                onVisibleChange(visible);\n            }\n        };\n        // 动态设置动画点\n        this.onPopupAlign = (domNode, align) => {\n            const placements = this.getPlacements();\n            // 当前返回的位置\n            const placement = Object.keys(placements).filter(key => placements[key].points[0] === align.points[0] &&\n                placements[key].points[1] === align.points[1])[0];\n            if (!placement) {\n                return;\n            }\n            // 根据当前坐标设置动画点\n            const rect = domNode.getBoundingClientRect();\n            const transformOrigin = {\n                top: '50%',\n                left: '50%',\n            };\n            if (placement.indexOf('top') >= 0 || placement.indexOf('Bottom') >= 0) {\n                transformOrigin.top = `${rect.height - align.offset[1]}px`;\n            }\n            else if (placement.indexOf('Top') >= 0 || placement.indexOf('bottom') >= 0) {\n                transformOrigin.top = `${-align.offset[1]}px`;\n            }\n            if (placement.indexOf('left') >= 0 || placement.indexOf('Right') >= 0) {\n                transformOrigin.left = `${rect.width - align.offset[0]}px`;\n            }\n            else if (placement.indexOf('right') >= 0 || placement.indexOf('Left') >= 0) {\n                transformOrigin.left = `${-align.offset[0]}px`;\n            }\n            domNode.style.transformOrigin = `${transformOrigin.left} ${transformOrigin.top}`;\n        };\n        this.saveTooltip = (node) => {\n            this.tooltip = node;\n        };\n        this.renderTooltip = ({ getPopupContainer: getContextPopupContainer, getPrefixCls, }) => {\n            const { props, state } = this;\n            const { prefixCls: customizePrefixCls, title, overlay, openClassName, getPopupContainer, getTooltipContainer, } = props;\n            const children = props.children;\n            const prefixCls = getPrefixCls('tooltip', customizePrefixCls);\n            let visible = state.visible;\n            // Hide tooltip when there is no title\n            if (!('visible' in props) && this.isNoTitle()) {\n                visible = false;\n            }\n            const child = this.getDisabledCompatibleChildren(React.isValidElement(children) ? children : <span>{children}</span>);\n            const childProps = child.props;\n            const childCls = classNames(childProps.className, {\n                [openClassName || `${prefixCls}-open`]: true,\n            });\n            return (<RcTooltip {...this.props} prefixCls={prefixCls} getTooltipContainer={getPopupContainer || getTooltipContainer || getContextPopupContainer} ref={this.saveTooltip} builtinPlacements={this.getPlacements()} overlay={overlay || title || ''} visible={visible} onVisibleChange={this.onVisibleChange} onPopupAlign={this.onPopupAlign}>\n        {visible ? cloneElement(child, { className: childCls }) : child}\n      </RcTooltip>);\n        };\n        this.state = {\n            visible: !!props.visible || !!props.defaultVisible,\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if ('visible' in nextProps) {\n            return { visible: nextProps.visible };\n        }\n        return null;\n    }\n    getPopupDomNode() {\n        return this.tooltip.getPopupDomNode();\n    }\n    getPlacements() {\n        const { builtinPlacements, arrowPointAtCenter, autoAdjustOverflow } = this.props;\n        return (builtinPlacements ||\n            getPlacements({\n                arrowPointAtCenter,\n                verticalArrowShift: 8,\n                autoAdjustOverflow,\n            }));\n    }\n    // Fix Tooltip won't hide at disabled button\n    // mouse events don't trigger at disabled button in Chrome\n    // https://github.com/react-component/tooltip/issues/18\n    getDisabledCompatibleChildren(element) {\n        const elementType = element.type;\n        if ((elementType.__ANT_BUTTON || elementType.__ANT_SWITCH || element.type === 'button') &&\n            element.props.disabled) {\n            // Pick some layout related style properties up to span\n            // Prevent layout bugs like https://github.com/ant-design/ant-design/issues/5254\n            const { picked, omitted } = splitObject(element.props.style, [\n                'position',\n                'left',\n                'right',\n                'top',\n                'bottom',\n                'float',\n                'display',\n                'zIndex',\n            ]);\n            const spanStyle = Object.assign({ display: 'inline-block' }, picked, { cursor: 'not-allowed', width: element.props.block ? '100%' : null });\n            const buttonStyle = Object.assign({}, omitted, { pointerEvents: 'none' });\n            const child = cloneElement(element, {\n                style: buttonStyle,\n                className: null,\n            });\n            return (<span style={spanStyle} className={element.props.className}>\n          {child}\n        </span>);\n        }\n        return element;\n    }\n    isNoTitle() {\n        const { title, overlay } = this.props;\n        return !title && !overlay; // overlay for old version compatibility\n    }\n    render() {\n        return <ConfigConsumer>{this.renderTooltip}</ConfigConsumer>;\n    }\n}\nTooltip.defaultProps = {\n    placement: 'top',\n    transitionName: 'zoom-big-fast',\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    arrowPointAtCenter: false,\n    autoAdjustOverflow: true,\n};\npolyfill(Tooltip);\nexport default Tooltip;\n"],"file":"index.js"}