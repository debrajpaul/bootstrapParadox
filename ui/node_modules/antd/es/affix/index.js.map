{"version":3,"sources":["affix/index.jsx"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","React","polyfill","classNames","omit","ConfigConsumer","throttleByAnimationFrameDecorator","ResizeObserver","warning","addObserveTarget","removeObserveTarget","getTargetRect","getFixedTop","getFixedBottom","getDefaultTarget","window","AffixStatus","Affix","state","status","None","lastAffix","prevTarget","getOffsetTop","props","offset","offsetBottom","offsetTop","undefined","getOffsetBottom","savePlaceholderNode","node","placeholderNode","saveFixedNode","fixedNode","prepareMeasure","event","setState","Prepare","affixStyle","placeholderStyle","process","env","NODE_ENV","onTestUpdatePosition","measure","onChange","targetNode","newState","targetRect","placeholderReact","fixedTop","fixedBottom","position","top","width","height","bottom","renderAffix","getPrefixCls","prefixCls","children","className","updatePosition","timeout","setTimeout","prevProps","newTarget","clearTimeout","cancel","Component","defaultProps","prototype"],"mappings":"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","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport { ConfigConsumer } from '../config-provider';\nimport { throttleByAnimationFrameDecorator } from '../_util/throttleByAnimationFrame';\nimport ResizeObserver from '../_util/resizeObserver';\nimport warning from '../_util/warning';\nimport { addObserveTarget, removeObserveTarget, getTargetRect, getFixedTop, getFixedBottom, } from './utils';\nfunction getDefaultTarget() {\n    return typeof window !== 'undefined' ? window : null;\n}\nvar AffixStatus;\n(function (AffixStatus) {\n    AffixStatus[AffixStatus[\"None\"] = 0] = \"None\";\n    AffixStatus[AffixStatus[\"Prepare\"] = 1] = \"Prepare\";\n})(AffixStatus || (AffixStatus = {}));\nclass Affix extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            status: AffixStatus.None,\n            lastAffix: false,\n            prevTarget: null,\n        };\n        this.getOffsetTop = () => {\n            const { offset, offsetBottom } = this.props;\n            let { offsetTop } = this.props;\n            if (typeof offsetTop === 'undefined') {\n                offsetTop = offset;\n                warning(typeof offset === 'undefined', 'Affix', '`offset` is deprecated. Please use `offsetTop` instead.');\n            }\n            if (offsetBottom === undefined && offsetTop === undefined) {\n                offsetTop = 0;\n            }\n            return offsetTop;\n        };\n        this.getOffsetBottom = () => {\n            return this.props.offsetBottom;\n        };\n        this.savePlaceholderNode = (node) => {\n            this.placeholderNode = node;\n        };\n        this.saveFixedNode = (node) => {\n            this.fixedNode = node;\n        };\n        // @ts-ignore TS6133\n        this.prepareMeasure = (event) => {\n            // event param is used before. Keep compatible ts define here.\n            this.setState({\n                status: AffixStatus.Prepare,\n                affixStyle: undefined,\n                placeholderStyle: undefined,\n            });\n            // Test if `updatePosition` called\n            if (process.env.NODE_ENV === 'test') {\n                const { onTestUpdatePosition } = this.props;\n                if (onTestUpdatePosition) {\n                    onTestUpdatePosition();\n                }\n            }\n        };\n        this.measure = () => {\n            const { status, lastAffix } = this.state;\n            const { target, onChange } = this.props;\n            if (status !== AffixStatus.Prepare || !this.fixedNode || !this.placeholderNode || !target) {\n                return;\n            }\n            const offsetTop = this.getOffsetTop();\n            const offsetBottom = this.getOffsetBottom();\n            const targetNode = target();\n            if (!targetNode) {\n                return;\n            }\n            const newState = {\n                status: AffixStatus.None,\n            };\n            const targetRect = getTargetRect(targetNode);\n            const placeholderReact = getTargetRect(this.placeholderNode);\n            const fixedTop = getFixedTop(placeholderReact, targetRect, offsetTop);\n            const fixedBottom = getFixedBottom(placeholderReact, targetRect, offsetBottom);\n            if (fixedTop !== undefined) {\n                newState.affixStyle = {\n                    position: 'fixed',\n                    top: fixedTop,\n                    width: placeholderReact.width,\n                    height: placeholderReact.height,\n                };\n                newState.placeholderStyle = {\n                    width: placeholderReact.width,\n                    height: placeholderReact.height,\n                };\n            }\n            else if (fixedBottom !== undefined) {\n                newState.affixStyle = {\n                    position: 'fixed',\n                    bottom: fixedBottom,\n                    width: placeholderReact.width,\n                    height: placeholderReact.height,\n                };\n                newState.placeholderStyle = {\n                    width: placeholderReact.width,\n                    height: placeholderReact.height,\n                };\n            }\n            newState.lastAffix = !!newState.affixStyle;\n            if (onChange && lastAffix !== newState.lastAffix) {\n                onChange(newState.lastAffix);\n            }\n            this.setState(newState);\n        };\n        // =================== Render ===================\n        this.renderAffix = ({ getPrefixCls }) => {\n            const { affixStyle, placeholderStyle } = this.state;\n            const { prefixCls, children } = this.props;\n            const className = classNames({\n                [getPrefixCls('affix', prefixCls)]: affixStyle,\n            });\n            let props = omit(this.props, ['prefixCls', 'offsetTop', 'offsetBottom', 'target', 'onChange']);\n            // Omit this since `onTestUpdatePosition` only works on test.\n            if (process.env.NODE_ENV === 'test') {\n                props = omit(props, ['onTestUpdatePosition']);\n            }\n            return (<ResizeObserver onResize={() => {\n                this.updatePosition();\n            }}>\n        <div {...props} ref={this.savePlaceholderNode}>\n          {affixStyle && <div style={placeholderStyle} aria-hidden=\"true\"/>}\n          <div className={className} ref={this.saveFixedNode} style={affixStyle}>\n            <ResizeObserver onResize={() => {\n                this.updatePosition();\n            }}>\n              {children}\n            </ResizeObserver>\n          </div>\n        </div>\n      </ResizeObserver>);\n        };\n    }\n    // Event handler\n    componentDidMount() {\n        const { target } = this.props;\n        if (target) {\n            // [Legacy] Wait for parent component ref has its value.\n            // We should use target as directly element instead of function which makes element check hard.\n            this.timeout = setTimeout(() => {\n                addObserveTarget(target(), this);\n                // Mock Event object.\n                this.updatePosition({});\n            });\n        }\n    }\n    componentDidUpdate(prevProps) {\n        const { prevTarget } = this.state;\n        const { target } = this.props;\n        let newTarget = null;\n        if (target) {\n            newTarget = target() || null;\n        }\n        if (prevTarget !== newTarget) {\n            removeObserveTarget(this);\n            if (newTarget) {\n                addObserveTarget(newTarget, this);\n                // Mock Event object.\n                this.updatePosition({});\n            }\n            this.setState({ prevTarget: newTarget });\n        }\n        if (prevProps.offsetTop !== this.props.offsetTop ||\n            prevProps.offsetBottom !== this.props.offsetBottom) {\n            this.updatePosition({});\n        }\n        this.measure();\n    }\n    componentWillUnmount() {\n        clearTimeout(this.timeout);\n        removeObserveTarget(this);\n        this.updatePosition.cancel();\n    }\n    // =================== Measure ===================\n    // Handle realign logic\n    updatePosition(event) {\n        this.prepareMeasure(event);\n    }\n    lazyUpdatePosition(event) {\n        const { target } = this.props;\n        const { affixStyle } = this.state;\n        // Check position change before measure to make Safari smooth\n        if (target && affixStyle) {\n            const offsetTop = this.getOffsetTop();\n            const offsetBottom = this.getOffsetBottom();\n            const targetNode = target();\n            if (targetNode) {\n                const targetRect = getTargetRect(targetNode);\n                const placeholderReact = getTargetRect(this.placeholderNode);\n                const fixedTop = getFixedTop(placeholderReact, targetRect, offsetTop);\n                const fixedBottom = getFixedBottom(placeholderReact, targetRect, offsetBottom);\n                if ((fixedTop !== undefined && affixStyle.top === fixedTop) ||\n                    (fixedBottom !== undefined && affixStyle.bottom === fixedBottom)) {\n                    return;\n                }\n            }\n        }\n        // Directly call prepare measure since it's already throttled.\n        this.prepareMeasure(event);\n    }\n    render() {\n        return <ConfigConsumer>{this.renderAffix}</ConfigConsumer>;\n    }\n}\nAffix.defaultProps = {\n    target: getDefaultTarget,\n};\n__decorate([\n    throttleByAnimationFrameDecorator()\n], Affix.prototype, \"updatePosition\", null);\n__decorate([\n    throttleByAnimationFrameDecorator()\n], Affix.prototype, \"lazyUpdatePosition\", null);\npolyfill(Affix);\nexport default Affix;\n"],"file":"index.js"}