{"version":3,"sources":["message/index.jsx"],"names":["React","Notification","Icon","defaultDuration","defaultTop","messageInstance","key","prefixCls","transitionName","getContainer","maxCount","getMessageInstance","callback","newInstance","style","top","instance","notice","args","duration","undefined","iconType","info","success","error","warning","loading","type","target","closePromise","Promise","resolve","onClose","iconNode","content","icon","result","removeNotice","then","filled","rejected","promise","api","open","config","options","destroy","forEach","warn"],"mappings":"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","sourcesContent":["/* global Promise */\nimport * as React from 'react';\nimport Notification from 'rc-notification';\nimport Icon from '../icon';\nlet defaultDuration = 3;\nlet defaultTop;\nlet messageInstance;\nlet key = 1;\nlet prefixCls = 'ant-message';\nlet transitionName = 'move-up';\nlet getContainer;\nlet maxCount;\nfunction getMessageInstance(callback) {\n    if (messageInstance) {\n        callback(messageInstance);\n        return;\n    }\n    Notification.newInstance({\n        prefixCls,\n        transitionName,\n        style: { top: defaultTop },\n        getContainer,\n        maxCount,\n    }, (instance) => {\n        if (messageInstance) {\n            callback(messageInstance);\n            return;\n        }\n        messageInstance = instance;\n        callback(instance);\n    });\n}\nfunction notice(args) {\n    const duration = args.duration !== undefined ? args.duration : defaultDuration;\n    const iconType = {\n        info: 'info-circle',\n        success: 'check-circle',\n        error: 'close-circle',\n        warning: 'exclamation-circle',\n        loading: 'loading',\n    }[args.type];\n    const target = key++;\n    const closePromise = new Promise(resolve => {\n        const callback = () => {\n            if (typeof args.onClose === 'function') {\n                args.onClose();\n            }\n            return resolve(true);\n        };\n        getMessageInstance(instance => {\n            const iconNode = (<Icon type={iconType} theme={iconType === 'loading' ? 'outlined' : 'filled'}/>);\n            instance.notice({\n                key: target,\n                duration,\n                style: {},\n                content: (<div className={`${prefixCls}-custom-content${args.type ? ` ${prefixCls}-${args.type}` : ''}`}>\n            {args.icon ? args.icon : iconType ? iconNode : ''}\n            <span>{args.content}</span>\n          </div>),\n                onClose: callback,\n            });\n        });\n    });\n    const result = () => {\n        if (messageInstance) {\n            messageInstance.removeNotice(target);\n        }\n    };\n    result.then = (filled, rejected) => closePromise.then(filled, rejected);\n    result.promise = closePromise;\n    return result;\n}\nconst api = {\n    open: notice,\n    config(options) {\n        if (options.top !== undefined) {\n            defaultTop = options.top;\n            messageInstance = null; // delete messageInstance for new defaultTop\n        }\n        if (options.duration !== undefined) {\n            defaultDuration = options.duration;\n        }\n        if (options.prefixCls !== undefined) {\n            prefixCls = options.prefixCls;\n        }\n        if (options.getContainer !== undefined) {\n            getContainer = options.getContainer;\n        }\n        if (options.transitionName !== undefined) {\n            transitionName = options.transitionName;\n            messageInstance = null; // delete messageInstance for new transitionName\n        }\n        if (options.maxCount !== undefined) {\n            maxCount = options.maxCount;\n            messageInstance = null;\n        }\n    },\n    destroy() {\n        if (messageInstance) {\n            messageInstance.destroy();\n            messageInstance = null;\n        }\n    },\n};\n['success', 'info', 'warning', 'error', 'loading'].forEach(type => {\n    api[type] = (content, duration, onClose) => {\n        if (typeof duration === 'function') {\n            onClose = duration;\n            duration = undefined;\n        }\n        return api.open({ content, duration: duration, type, onClose });\n    };\n});\napi.warn = api.warning;\nexport default api;\n"],"file":"index.js"}